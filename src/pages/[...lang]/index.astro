---
import Authors from "@/components/Authors.astro";
import Citation from "@/components/Citation.astro";
import DataSection from "@/components/Dataset/DataSection.astro";
import DemoVideo from "@/components/DemoVideo.astro";
import FeatureCards from "@/components/FeatureCards.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header/index.astro";
import Hero from "@/components/Hero/index.astro";
import Layout from "@/layouts/Layout.astro";
import { DEFAULT_LOCALE, LOCALES, isLocale } from "@/lib/locales";

export async function getStaticPaths() {
  return [
    { params: { lang: [] } }, // → `/` (default locale)
    ...LOCALES.map((l) => ({ params: { lang: [l] } })), // → `/en`, `/ja`
  ];
}

const raw = Astro.params.lang?.[0];
const lang = isLocale(raw) ? raw : DEFAULT_LOCALE; // fallback to default locale
---

<Layout>
  <Header />
  <Hero />
  <DemoVideo />
  <FeatureCards />
  <DataSection />
  <Authors />
  <Citation />
  <Footer />
</Layout>